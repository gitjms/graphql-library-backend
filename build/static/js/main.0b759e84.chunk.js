(this["webpackJsonplibrary-frontend"]=this["webpackJsonplibrary-frontend"]||[]).push([[0],{104:function(e,t,a){e.exports=a(134)},125:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var n=a(86),r=a(0),l=a.n(r),o=a(31),c=a.n(o),i=a(5),u=a(92),s=a(93),m=a(91),b=a(96),d=a(36),p=a(37),g=a(23),f=a.n(g),h=a(35),E=a(95),v=a(70),y=a(24),j=a(16);function O(){var e=Object(y.a)(["\n  mutation createUser($username: String!, $favoriteGenre: String!, $password: String!){\n    createUser(\n      username: $username,\n      favoriteGenre: $favoriteGenre,\n      password: $password\n    ) {\n      value\n    }\n  }\n"]);return O=function(){return e},e}function k(){var e=Object(y.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password)  {\n      value\n    }\n  }\n"]);return k=function(){return e},e}function S(){var e=Object(y.a)(["\n  subscription {\n    authorEdited {\n      ...authorDetails\n    }\n  }\n","\n"]);return S=function(){return e},e}function w(){var e=Object(y.a)(["\n  mutation editAuthor($name: String!, $setBornTo: Int!){\n    editAuthor(\n      name: $name,\n      setBornTo: $setBornTo\n    ) {\n      ...authorDetails\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function C(){var e=Object(y.a)(["\n  subscription {\n    bookAdded {\n      title\n      author {\n        ...authorDetails\n      }\n      published\n      genres\n    }\n  }\n","\n"]);return C=function(){return e},e}function N(){var e=Object(y.a)(["\n  mutation addBook($title: String!, $author:String!, $published:Int!, $genres:[String!]!) {\n    addBook(\n      title: $title,\n      author: $author,\n      published: $published,\n      genres: $genres\n    ){\n      title,\n      author {\n        ...authorDetails\n      }\n    }\n  }\n  ","\n"]);return N=function(){return e},e}function B(){var e=Object(y.a)(["\n  query allBooks($author: String, $genre: String){\n    allBooks(author: $author, genre: $genre) { \n      title\n      author {\n        ...authorDetails\n      }\n      published\n      genres\n    }\n  }\n  ","\n"]);return B=function(){return e},e}function G(){var e=Object(y.a)(["\n  query {\n    allAuthors {\n      ...authorDetails\n    }\n  }\n  ","\n"]);return G=function(){return e},e}function $(){var e=Object(y.a)(["\n  query {\n    favorites {\n      title\n      author {\n      ...authorDetails\n      }\n      published\n      genres\n    }\n  }\n  ","\n"]);return $=function(){return e},e}function x(){var e=Object(y.a)(["\n  query {\n    me {\n      favoriteGenre\n    }\n  }\n"]);return x=function(){return e},e}function A(){var e=Object(y.a)(["\nfragment authorDetails on Author {\n  id\n  name\n  born\n  bookCount\n}\n"]);return A=function(){return e},e}var D=Object(j.a)(A()),L=Object(j.a)(x()),T=Object(j.a)($(),D),Q=Object(j.a)(G(),D),q=Object(j.a)(B(),D),F=Object(j.a)(N(),D),U=Object(j.a)(C(),D),R=Object(j.a)(w(),D),I=Object(j.a)(S(),D),P=Object(j.a)(k()),W=Object(j.a)(O()),z=function(e){var t=a(117).animateScroll,n=e.authors.map((function(e){return{value:e.name,label:e.name}})),o=Object(r.useState)(""),c=Object(i.a)(o,2),u=c[0],s=c[1],m=Object(r.useState)(""),b=Object(i.a)(m,2),d=b[0],p=b[1],g=Object(E.a)(R,{onError:function(t){e.setError(t.graphQLErrors[0]?t.graphQLErrors[0].message:t.message)},update:function(t,a){e.updateAuthorCacheWith(a.data.editAuthor),e.setAuthorupdateCache(a.data.editAuthor)},refetchQueries:[{query:Q}]}),y=Object(i.a)(g,1)[0],j=function(){var e=Object(h.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),""!==u&&""!==d&&(y({variables:{name:u,setBornTo:Number(d)}}),p(""),s(""),t.scrollToTop());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("h3",{"data-toggle":"tooltip","data-placement":"top",title:"set birthyear","aria-label":"set birthyear"},"set birthyear"),l.a.createElement("form",{onSubmit:j},l.a.createElement("div",null,l.a.createElement(v.a,{className:"form-control",value:u.value,options:n,onChange:function(e){s(e.value)}})),l.a.createElement("br",null),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{style:{width:"50px"}},"born:"),l.a.createElement("input",{type:"number",value:d,onChange:function(e){var t=e.target;return p(t.value)},"data-toggle":"tooltip","data-placement":"top",title:"set birthyear","aria-label":"set birthyear"}),l.a.createElement("button",{className:"btn btn-raised btn-primary ml-2",type:"submit","data-toggle":"tooltip","data-placement":"top",title:"update author","aria-label":"update author"},"update author"))))},V=l.a.forwardRef((function(e,t){var a=Object(r.useState)(!1),n=Object(i.a)(a,2),o=n[0],c=n[1],u={display:o?"none":""},s={display:o?"":"none"},m=function(){c(!o)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:m}})),l.a.createElement("div",{className:"btn-group",role:"group"},l.a.createElement("div",{style:u},l.a.createElement("button",{className:"btn btn-raised btn-primary",type:"submit",onClick:m,"data-toggle":"tooltip","data-placement":"top",title:e.buttonLabel,"aria-label":e.buttonLabel},e.buttonLabel)),l.a.createElement("div",{style:s,className:"togglableContent"},e.children,l.a.createElement("button",{className:"btn btn-raised btn-primary",type:"submit",onClick:m,"data-toggle":"tooltip","data-placement":"top",title:e.closeLabel,"aria-label":e.closeLabel},e.closeLabel)))}));V.displayName="Togglable";var H=V,J=function(e){var t=Object(r.useRef)();if(!e.show)return null;var a=[];a=0===e.authorUpdateCache.length?e.allAuthors:e.authorUpdateCache;var n={paddingRight:"10px"},o={float:"right"};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("h2",{"data-toggle":"tooltip","data-placement":"top",title:"authors page","aria-label":"authors page"},"authors"),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",{style:n,"data-toggle":"tooltip","data-placement":"top",title:"born","aria-label":"born"},"born"),l.a.createElement("th",{"data-toggle":"tooltip","data-placement":"top",title:"books","aria-label":"books"},"books")),a.map((function(e){return l.a.createElement("tr",{key:e.name},l.a.createElement("td",{style:n,"data-toggle":"tooltip","data-placement":"top",title:e.name,"aria-label":e.name},e.name),l.a.createElement("td",{style:n,"data-toggle":"tooltip","data-placement":"top",title:e.born,"aria-label":e.born},e.born),l.a.createElement("td",{style:o,"data-toggle":"tooltip","data-placement":"top",title:e.bookCount,"aria-label":e.bookCount},e.bookCount))}))))),e.token&&l.a.createElement("div",null,l.a.createElement(H,{buttonLabel:"Set birthyear",closeLabel:"close",ref:t},l.a.createElement(z,{authors:a,notify:e.notify,setError:e.notifyError,updateAuthorCacheWith:e.updateAuthorCacheWith,setAuthorupdateCache:e.setAuthorupdateCache}))))},M=a(100),K=function(e){return l.a.createElement("button",{type:"button",className:"btn btn-raised btn-warning mr-1",value:e.genre,onClick:function(){e.setGenre(e.genre)},id:"genre-button","data-toggle":"tooltip","data-placement":"top",title:e.genre,"aria-label":e.genre},e.genre)},X=function(e){var t=Object(m.a)(q,{variables:{genre:e.optedGenre}}),a=Object(i.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)([]),u=Object(i.a)(c,2),s=u[0],b=u[1],g=Object(m.a)(q),f=Object(i.a)(g,2),h=f[0],E=f[1],y=Object(r.useState)([]),j=Object(i.a)(y,2),O=j[0],k=j[1];if(Object(r.useEffect)((function(){o.data&&b(o.data.allBooks)}),[o,e.optedGenre]),Object(r.useEffect)((function(){"all"!==e.optedGenre&&n()}),[n,e.optedGenre]),Object(r.useEffect)((function(){E.data&&k(E.data.allBooks)}),[E]),Object(r.useEffect)((function(){e.bookUpdateCache&&h()}),[h,e.bookUpdateCache]),!e.show)return null;if(o.loading||E.loading)return l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement(d.a,{icon:p.d,size:"5x"})));var S=[];S="all"===e.optedGenre?null===e.bookUpdateCache?e.allBooks:O.concat(e.bookUpdateCache):s;var w=[],C=[];S.map((function(e){return e.genres.filter((function(e){return C.push(e)}))}));var N=(w=Object(M.a)(new Set(C))).map((function(e){return{value:e,label:e}})),B={paddingRight:"10px"},G={float:"right"};return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("h2",{"data-toggle":"tooltip","data-placement":"top",title:"books page","aria-label":"books page"},"books"),"all"!==e.optedGenre&&l.a.createElement(l.a.Fragment,null,"in genre ",l.a.createElement("b",null,e.optedGenre),l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{style:B}),l.a.createElement("th",{style:B,"data-toggle":"tooltip","data-placement":"top",title:"author","aria-label":"author"},"author"),l.a.createElement("th",{"data-toggle":"tooltip","data-placement":"top",title:"published","aria-label":"published"},"published")),S.map((function(e,t,a){return l.a.createElement("tr",{key:t},l.a.createElement("td",{style:B,"data-toggle":"tooltip","data-placement":"top",title:e.title,"aria-label":e.title},l.a.createElement("em",null,e.title)),l.a.createElement("td",{style:B,"data-toggle":"tooltip","data-placement":"top",title:e.author.name,"aria-label":e.author.name},e.author.name),l.a.createElement("td",{style:G,"data-toggle":"tooltip","data-placement":"top",title:e.published,"aria-label":e.published},e.published))})))),l.a.createElement("br",null),w.map((function(t,a,n){return l.a.createElement(K,{genre:t,key:n.indexOf(t),setGenre:e.setGenre})})),"all"!==e.optedGenre&&l.a.createElement("button",{type:"button",className:"btn btn-raised btn-primary mr-1",onClick:function(){return e.setGenre("all")},id:"genre-button","data-toggle":"tooltip","data-placement":"top",title:"all genres","aria-label":"all genres"},"all genres"),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(v.a,{value:e.optedGenre,options:N,onChange:function(t){e.setGenre(t.value)}})),l.a.createElement("br",null))},Y=function(e){var t=Object(r.useState)(""),a=Object(i.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(""),u=Object(i.a)(c,2),s=u[0],m=u[1],b=Object(r.useState)(""),d=Object(i.a)(b,2),p=d[0],g=d[1],v=Object(r.useState)(""),y=Object(i.a)(v,2),j=y[0],O=y[1],k=Object(r.useState)([]),S=Object(i.a)(k,2),w=S[0],C=S[1],N=Object(E.a)(F,{onError:function(t){e.notifyError(t.graphQLErrors[0]?t.graphQLErrors[0].message:t.message)},update:function(t,a){e.updateBookCacheWith(a.data.addBook)},refetchQueries:[{query:q},{query:Q}]}),B=Object(i.a)(N,1)[0];if(!e.show)return null;var G=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,B({variables:{title:n,author:s,published:Number(p),genres:w}});case 3:o(""),g(""),m(""),C([]),O("");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$={width:"100px"};return l.a.createElement("div",{className:"col-auto"},l.a.createElement("br",null),l.a.createElement("h2",{"data-toggle":"tooltip","data-placement":"top",title:"add book page","aria-label":"add book page"},"add book"),l.a.createElement("br",null),l.a.createElement("form",{onSubmit:G},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{style:$},"title:"),l.a.createElement("input",{autoFocus:!0,value:n,onChange:function(e){var t=e.target;return o(t.value)},"data-toggle":"tooltip","data-placement":"top",title:"set title","aria-label":"set title"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{style:$},"author:"),l.a.createElement("input",{value:s,onChange:function(e){var t=e.target;return m(t.value)},"data-toggle":"tooltip","data-placement":"top",title:"set author","aria-label":"set author"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{style:$},"published:"),l.a.createElement("input",{type:"number",value:p,onChange:function(e){var t=e.target;return g(t.value)},"data-toggle":"tooltip","data-placement":"top",title:"set published","aria-label":"set published"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{value:j,onChange:function(e){var t=e.target;return O(t.value)},"data-toggle":"tooltip","data-placement":"top",title:"set genre","aria-label":"set genre"}),l.a.createElement("button",{className:"btn btn-raised btn-primary ml-2",onClick:function(){""!==j&&(C(w.concat(j)),O(""))},type:"button","data-toggle":"tooltip","data-placement":"top",title:"add genre","aria-label":"add genre"},"add genre")),l.a.createElement("div",{style:{fontFamily:"Verdana, Geneva, Tahoma, sans-serif"}},"genres: ",w.join(" ")),l.a.createElement("button",{className:"btn btn-raised btn-primary",type:"submit","data-toggle":"tooltip","data-placement":"top",title:"submit","aria-label":"submit"},"submit")))},Z=function(){return l.a.createElement("div",{style:{color:"gray",fontStyle:"italic",fontSize:16}},l.a.createElement("br",null),l.a.createElement("hr",null),l.a.createElement("center",null,l.a.createElement("em",null,"Bloglist app with GraphQL, Full Stack Web Development"),l.a.createElement("br",null),l.a.createElement("em",null,"University of Helsinki 2020")))},_=function(e){var t=e.message;if(!t)return null;return l.a.createElement("div",{style:{color:"green",background:"lightgray",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginTop:10,marginBottom:10}},t)},ee=function(e){var t=e.message;if(!t)return null;return l.a.createElement("div",{style:{color:"rgb(255, 0, 0)",background:"lightgray",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginTop:10,marginBottom:10}},t)},te=function(e){var t=Object(r.useState)(""),a=Object(i.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(""),u=Object(i.a)(c,2),s=u[0],m=u[1],b=Object(E.a)(P,{onError:function(t){e.notifyError(t.graphQLErrors[0]?t.graphQLErrors[0].message:t.message),g.data||window.alert(t.message)}}),d=Object(i.a)(b,2),p=d[0],g=d[1];Object(r.useEffect)((function(){if(g.data){var t=g.data.login.value;e.setToken(t),localStorage.setItem("library-user-token",t)}}),[g]);var v=function(){var t=Object(h.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,p({variables:{username:n,password:s}});case 3:e.setPage("authors");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y={width:"100px"};return l.a.createElement("div",{className:"col-auto"},l.a.createElement("br",null),l.a.createElement("h2",{"data-toggle":"tooltip","data-placement":"top",title:"sign in page","aria-label":"sign in page"},"sign in"),l.a.createElement("form",{onSubmit:v},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{style:y},"username:"),l.a.createElement("input",{autoFocus:!0,value:n,onChange:function(e){var t=e.target;return o(t.value)},"data-toggle":"tooltip","data-placement":"top",title:"set username","aria-label":"set username"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{style:y},"password:"),l.a.createElement("input",{type:"password",value:s,onChange:function(e){var t=e.target;return m(t.value)},"data-toggle":"tooltip","data-placement":"top",title:"set password","aria-label":"set password"})),l.a.createElement("button",{className:"btn btn-raised btn-primary mr-1",type:"submit","data-toggle":"tooltip","data-placement":"top",title:"login","aria-label":"login"},"login"),l.a.createElement("button",{className:"btn btn-raised btn-primary",type:"button",onClick:function(){return e.setPage("authors")},"data-toggle":"tooltip","data-placement":"top",title:"cancel","aria-label":"cancel"},"cancel")))},ae=function(e){var t=Object(r.useState)(""),a=Object(i.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(""),u=Object(i.a)(c,2),s=u[0],m=u[1],b=Object(r.useState)(""),d=Object(i.a)(b,2),p=d[0],g=d[1],v=Object(E.a)(W,{onError:function(t){e.notifyError(t.graphQLErrors[0]?t.graphQLErrors[0].message:t.message),O.data||window.alert(t.message)}}),y=Object(i.a)(v,2),j=y[0],O=y[1];Object(r.useEffect)((function(){if(O.data){var t=O.data.createUser.value;e.setToken(t),localStorage.setItem("library-user-token",t)}}),[O]);var k=function(){var t=Object(h.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,j({variables:{username:n,favoriteGenre:s,password:p}});case 3:e.setPage("authors");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S={width:"100px"};return l.a.createElement("div",{className:"col-auto"},l.a.createElement("br",null),l.a.createElement("h2",{"data-toggle":"tooltip","data-placement":"top",title:"create account page","aria-label":"create account page"},"create account"),l.a.createElement("form",{onSubmit:k},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{style:S},"username:"),l.a.createElement("input",{autoFocus:!0,value:n,onChange:function(e){var t=e.target;return o(t.value)},"data-toggle":"tooltip","data-placement":"top",title:"set username","aria-label":"set username"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{style:S},"favorite genre:"),l.a.createElement("input",{value:s,onChange:function(e){var t=e.target;return m(t.value)},"data-toggle":"tooltip","data-placement":"top",title:"set favorite genre","aria-label":"set favorite genre"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{style:S},"password:"),l.a.createElement("input",{type:"password",value:p,onChange:function(e){var t=e.target;return g(t.value)},"data-toggle":"tooltip","data-placement":"top",title:"set password","aria-label":"set password"})),l.a.createElement("button",{className:"btn btn-raised btn-primary mr-1",type:"submit","data-toggle":"tooltip","data-placement":"top",title:"submit","aria-label":"submit"},"submit"),l.a.createElement("button",{className:"btn btn-raised btn-primary",type:"button",onClick:function(){return e.setPage("authors")},"data-toggle":"tooltip","data-placement":"top",title:"cancel","aria-label":"cancel"},"cancel")))},ne=function(e){if(!e.show)return null;var t={paddingRight:"10px"},a={float:"right"},n={paddingRight:"5px"},r={fontFamily:"Verdana, Geneva, Tahoma, sans-serif"};return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("h2",{"data-toggle":"tooltip","data-placement":"top",title:"recommendations page","aria-label":"recommendations page"},"recommendations"),l.a.createElement("br",null),e.favoriteBooks.length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:r},"books in your favorite genre",l.a.createElement("span",{style:n}),l.a.createElement("b",{"data-toggle":"tooltip","data-placement":"top",title:e.favoriteGenre,"aria-label":e.favoriteGenre},e.favoriteGenre,":"),l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",{style:t}),l.a.createElement("th",{style:t,"data-toggle":"tooltip","data-placement":"top",title:"author","aria-label":"author"},"author"),l.a.createElement("th",{"data-toggle":"tooltip","data-placement":"top",title:"published","aria-label":"published"},"published")),e.favoriteBooks.map((function(e,n,r){return l.a.createElement("tr",{key:n},l.a.createElement("td",{style:t,"data-toggle":"tooltip","data-placement":"top",title:e.title,"aria-label":e.title},l.a.createElement("em",null,e.title)),l.a.createElement("td",{style:t,"data-toggle":"tooltip","data-placement":"top",title:e.author.name,"aria-label":e.author.name},e.author.name),l.a.createElement("td",{style:a,"data-toggle":"tooltip","data-placement":"top",title:e.published,"aria-label":e.published},e.published))}))))):l.a.createElement("div",{style:r},"no recommendations for your favorite genre",l.a.createElement("span",{style:n}),l.a.createElement("b",{"data-toggle":"tooltip","data-placement":"top",title:e.favoriteGenre,"aria-label":e.favoriteGenre},e.favoriteGenre,":"),l.a.createElement("br",null),l.a.createElement("br",null)))},re=function(){var e=Object(u.a)(),t=Object(s.a)(Q),a=Object(s.a)(q),n=Object(r.useState)([]),o=Object(i.a)(n,2),c=o[0],g=o[1],f=Object(r.useState)([]),h=Object(i.a)(f,2),E=h[0],v=h[1],y=Object(r.useState)(localStorage.getItem("library-user-token")),j=Object(i.a)(y,2),O=j[0],k=j[1],S=Object(r.useState)(null),w=Object(i.a)(S,2),C=w[0],N=w[1],B=Object(r.useState)(null),G=Object(i.a)(B,2),$=G[0],x=G[1],A=Object(r.useState)("authors"),D=Object(i.a)(A,2),F=D[0],R=D[1],P=Object(m.a)(T),W=Object(i.a)(P,2),z=W[0],V=W[1],H=Object(r.useState)([]),M=Object(i.a)(H,2),K=M[0],re=M[1],le=Object(m.a)(L),oe=Object(i.a)(le,2),ce=oe[0],ie=oe[1],ue=Object(r.useState)(""),se=Object(i.a)(ue,2),me=se[0],be=se[1],de=Object(r.useState)("all"),pe=Object(i.a)(de,2),ge=pe[0],fe=pe[1],he=Object(r.useState)(null),Ee=Object(i.a)(he,2),ve=Ee[0],ye=Ee[1],je=Object(r.useState)([]),Oe=Object(i.a)(je,2),ke=Oe[0],Se=Oe[1];Object(r.useEffect)((function(){t.data&&g(t.data.allAuthors)}),[t]),Object(r.useEffect)((function(){a.data&&v(a.data.allBooks)}),[a]),Object(r.useEffect)((function(){ie.data&&ie.data.me&&be(ie.data.me.favoriteGenre)}),[ie]),Object(r.useEffect)((function(){V.data&&re(V.data.favorites)}),[V]);var we=function(t){var a,n,r=e.readQuery({query:q});a=r.allBooks,n=t,a.map((function(e){return e.id})).includes(n.id)||e.writeQuery({query:q,data:{allBooks:r.allBooks.concat(t)}})},Ce=function(t){e.writeQuery({query:Q,data:{allAuthors:t}})};Object(b.a)(U,{onSubscriptionData:function(e){var t=e.subscriptionData.data.bookAdded;we(t),ye(t),v(E.concat(t)),Ne("".concat(t.title," added"))}}),Object(b.a)(I,{onSubscriptionData:function(e){var t=e.subscriptionData.data.authorEdited;Ce(t),Se(t),Ne("author birthyear edited")}});var Ne=function(e){N(e),setTimeout((function(){N(null)}),1e4)},Be=function(e){x(e),setTimeout((function(){x(null)}),1e4)};if(t.loading||a.loading||ie.loading||V.loading)return l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement(d.a,{icon:p.d,size:"5x",spin:!0})));var Ge={paddingRight:"5px"};return l.a.createElement(l.a.Fragment,null,l.a.createElement("nav",{id:"nav",className:"navbar navbar-light bg-light"},l.a.createElement("a",{className:"navbar-brand",href:"/","data-toggle":"tooltip","data-placement":"top",title:"Bloglist home","aria-label":"Bloglist home"},l.a.createElement("span",{style:Ge}),l.a.createElement(d.a,{icon:p.a}),l.a.createElement("strong",null,"Bloglist")),l.a.createElement("div",{className:"button-group"},l.a.createElement("button",{className:"btn btn-raised btn-warning mr-1",onClick:function(){return R("authors")},"data-toggle":"tooltip","data-placement":"top",title:"authors","aria-label":"authors"},"authors"),l.a.createElement("button",{className:"btn btn-raised btn-warning mr-1",onClick:function(){return R("books")},"data-toggle":"tooltip","data-placement":"top",title:"books","aria-label":"books"},"books"),O&&l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"btn btn-raised btn-warning mr-1",onClick:function(){return R("addBook")},"data-toggle":"tooltip","data-placement":"top",title:"add book","aria-label":"add book"},"add book"),l.a.createElement("button",{className:"btn btn-raised btn-warning mr-1",onClick:function(){ce(),z(),R("recommended")},"data-toggle":"tooltip","data-placement":"top",title:"recommended","aria-label":"recommended"},"recommended")),O?l.a.createElement("button",{className:"btn btn-raised btn-primary",onClick:function(){R("authors"),k(null),localStorage.clear(),e.clearStore()},"data-toggle":"tooltip","data-placement":"top",title:"sign out","aria-label":"sign out"},"sign out",l.a.createElement("span",{style:Ge}),l.a.createElement(d.a,{icon:p.c})):l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"btn btn-raised btn-primary mr-1",onClick:function(){return R("login")},"data-toggle":"tooltip","data-placement":"top",title:"sign in","aria-label":"sign in"},"sign in",l.a.createElement("span",{style:Ge}),l.a.createElement(d.a,{icon:p.b})),l.a.createElement("button",{className:"btn btn-raised btn-primary",onClick:function(){return R("createacc")},"data-toggle":"tooltip","data-placement":"top",title:"sign up","aria-label":"sign up"},"sign up",l.a.createElement("span",{style:Ge}),l.a.createElement(d.a,{icon:p.e}))))),l.a.createElement("div",{className:"container"},l.a.createElement(_,{message:C}),l.a.createElement(ee,{errorMessage:$}),l.a.createElement(J,{show:"authors"===F,notifyError:Be,notify:Ne,token:O,allAuthors:c,updateAuthorCacheWith:Ce,setAuthorupdateCache:Se,authorUpdateCache:ke}),l.a.createElement(X,{show:"books"===F,optedGenre:ge,setGenre:fe,client:e,allBooks:E,bookUpdateCache:ve,setBookupdateCache:ye}),"recommended"===F&&l.a.createElement(ne,{show:"recommended"===F,favoriteBooks:K,favoriteGenre:me}),"addBook"===F&&l.a.createElement(Y,{show:"addBook"===F,setPage:R,notify:Ne,notifyError:Be,client:e,updateBookCacheWith:we}),"login"===F&&l.a.createElement(te,{setToken:k,notifyError:Be,setPage:R}),"createacc"===F&&l.a.createElement(ae,{setToken:k,notifyError:Be,setPage:R}),l.a.createElement(Z,null),l.a.createElement("br",null)))},le=(a(125),a(50)),oe=a(62),ce=a(63),ie=a(64),ue=a(94),se=a(101),me=a(102),be=a(99),de=Object(se.a)((function(e,t){var a=t.headers,r=localStorage.getItem("library-user-token");return{headers:Object(n.a)(Object(n.a)({},a),{},{authorization:r?"bearer ".concat(r):null})}})),pe=new le.a({uri:"https://graphql-library-jms.herokuapp.com"}),ge=new be.a({uri:"ws://localhost:4000/graphql"}),fe=Object(oe.a)((function(e){var t=e.query,a=Object(me.a)(t);return"OperationDefinition"===a.kind&&"subscription"===a.operation}),ge,de.concat(pe)),he=new ce.a({cache:new ie.a,link:fe});c.a.render(l.a.createElement(ue.a,{client:he},l.a.createElement(re,null)),document.getElementById("root"))}},[[104,1,2]]]);
//# sourceMappingURL=main.0b759e84.chunk.js.map